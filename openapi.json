{
  "openapi": "3.1.0",
  "info": {
    "title": "Content Atlas API",
    "description": "# Public API Integration Guide\n\nThis guide explains how external services can use the Content Atlas public API to explore dataset metadata, run large language model (LLM) powered queries, and stream results back into their own applications. It is intended for teams bootstrapping a new integration and captures the expected request flow, conversation mechanics, and response formats.\n\n---\n\n## Capabilities Overview\n- Authenticate with an issued API key using the `X-API-Key` header.\n- Discover available reporting tables and their row counts.\n- Inspect the column-level schema for a specific table.\n- Submit natural language prompts that are translated to SQL by the platform's LLM agent.\n- Maintain conversational context across calls by reusing a `thread_id`.\n- Retrieve query outputs as CSV data, with support for result sets up to 10\u202f000 rows per request.\n\nAll public endpoints share the `/api/v1` prefix (e.g., `https://{host}/api/v1/query`).\n\n---\n\n## Authentication and Safeguards\n- Each request must include `X-API-Key: <your_key>`. Keys can be provisioned via the internal admin console or the API key management endpoints.\n- Keys are stored hashed. If a key is revoked or expires, requests return `401 Invalid or expired API key`.\n- Rate limiting is enforced per key (`rate_limit_per_minute` column). Coordinate with the platform team if your integration requires higher throughput.\n- API access is read-only. The query agent blocks destructive SQL (`INSERT`, `UPDATE`, `DELETE`, etc.) and access to protected system tables such as `users`, `api_keys`, `file_imports`, `import_history`, `import_duplicates`, `import_jobs`, `mapping_errors`, `table_metadata`, `uploaded_files`, `query_messages`, and `query_threads`.\n\n---\n\n## Recommended Integration Flow\n1. **Acquire an API key** and store it securely (e.g., secret manager). Never embed plain keys in client bundles.\n2. **Enumerate tables** using `GET /api/v1/tables` to understand available datasets and row volumes.\n3. **Inspect schema** with `GET /api/v1/tables/{table_name}/schema` before issuing analytical prompts.\n4. **Run a query** via `POST /api/v1/query`, passing:\n   - `prompt`: the user\u2019s natural language question.\n   - `thread_id`: a stable identifier (e.g., customer ID) to preserve conversation context.\n   - `max_rows`: desired row ceiling (see \u201cLarge Result Sets\u201d below).\n5. **Parse the response**:\n   - `response`: conversational answer produced by the LLM agent.\n   - `executed_sql`: SQL text executed on the database (if any).\n   - `data_csv`: CSV string containing the result set.\n   - `rows_returned`: number of records included in `data_csv`.\n6. **Handle follow-up prompts** by reusing the same `thread_id`, allowing the agent to refer to prior conversation state.\n\n---\n\n## Endpoint Reference\n\n### `GET /api/v1/tables`\nLists user-facing tables along with row counts.\n\n**Sample request**\n```bash\ncurl https://{host}/api/v1/tables \\\n  -H \"X-API-Key: $ATLAS_KEY\"\n```\n\n**Sample response**\n```json\n{\n  \"success\": true,\n  \"tables\": [\n    { \"table_name\": \"ad_performance\", \"row_count\": 28451 },\n    { \"table_name\": \"campaigns\", \"row_count\": 1200 }\n  ]\n}\n```\n\n### `GET /api/v1/tables/{table_name}/schema`\nReturns column-level metadata so integrations can validate prompts or enforce downstream typing.\n\n**Sample response**\n```json\n{\n  \"success\": true,\n  \"table_name\": \"ad_performance\",\n  \"columns\": [\n    { \"name\": \"date\", \"type\": \"date\", \"nullable\": false },\n    { \"name\": \"spend\", \"type\": \"numeric\", \"nullable\": false }\n  ]\n}\n```\n\n### `POST /api/v1/query`\nTranslates a natural language prompt into SQL, executes it, and returns both a conversational summary and CSV data. Requests without a `thread_id` are associated with a default thread.\n\n**Request body**\n```json\n{\n  \"prompt\": \"Show total spend by campaign for Q1 2024 ordered by spend descending.\",\n  \"max_rows\": 10000,\n  \"thread_id\": \"client-abc\"\n}\n```\n\n**Response body**\n```json\n{\n  \"success\": true,\n  \"response\": \"Here is the Q1 2024 spend by campaign (top 50 shown).\",\n  \"executed_sql\": \"SELECT ... LIMIT 10000;\",\n  \"data_csv\": \"campaign,spend\\nBrand Awareness,185000.25\\n...\",\n  \"execution_time_seconds\": 3.42,\n  \"rows_returned\": 284,\n  \"error\": null\n}\n```\n\n**Conversation behavior**\n- The agent automatically injects schema context and remembers previous turns scoped to the supplied `thread_id`.\n- If the user prompt clearly asks for specific data (keywords such as \u201clist\u201d, \u201ccount\u201d, \u201ctop\u201d), the agent forces at least one `SELECT` query; otherwise it may provide strategic guidance without executing SQL.\n- Follow-up prompts like \u201climit to California\u201d or \u201cwhat was the previous total?\u201d should reuse the same `thread_id` to keep the context.\n\n### `POST /api/v1/generate-sql`\nLightweight endpoint that converts natural language to SQL without executing it. Designed for the probe phase of large export workflows or validation.\n\n**Request body**\n```json\n{\n  \"prompt\": \"Get top 10000 clients with email and company\",\n  \"table_hints\": [\"clients-list\"]\n}\n```\n\n**Response body**\n```json\n{\n  \"success\": true,\n  \"sql_query\": \"SELECT email, company_name FROM \\\"clients-list\\\" LIMIT 10000\",\n  \"tables_referenced\": [\"clients-list\"],\n  \"explanation\": \"Selecting email and company columns from clients table\",\n  \"error\": null\n}\n```\n\n---\n\n## Handling Large Result Sets (10\u202f000 Row Requirement)\n\n- `max_rows` accepts integers from 1 to 10\u202f000. Integrations should set this value explicitly when requesting large exports.\n- The backend agent shapes queries with an explicit `LIMIT` that honors `max_rows`. The `rows_returned` field indicates how many records were actually delivered.\n- For exports larger than 10\u202f000 rows, plan for request batching (e.g., iterate by date ranges) or bespoke data pipelines\u2014public API calls intentionally cap at 10\u202f000 rows to protect performance.\n- When building UI experiences, consider splitting very large `data_csv` payloads into streaming downloads or background jobs to avoid blocking user interactions.\n\n> **Implementation note:** Ensure the underlying SQL execution layer fetches at least `max_rows` rows. Earlier builds truncated batches at 1\u202f000; confirm your deployment is running the updated configuration before relying on 10\u202f000-row pulls.\n\n---\n\n## Response Fields and Error Handling\n\n- `success` is `true` when the request completed end-to-end; network or unexpected server failures surface as HTTP `500` with a descriptive `detail`.\n- `error` contains a human-readable message when something prevented a query from executing (e.g., referencing a protected table). The field can be populated even when `success` is `true`, so check it before processing results.\n- Common HTTP statuses:\n  - `401`: Missing or invalid API key.\n  - `404`: Requested table not found in `/tables/{table_name}/schema`.\n  - `500`: Unhandled server-side error; retry with backoff and alert the platform team.\n- Log both the `executed_sql` and `thread_id` values for traceability when escalating issues.\n\n---\n\n## Implementation Checklist\n- [ ] Request and securely store the API key.\n- [ ] Configure an HTTP client that always passes the `X-API-Key` header.\n- [ ] Decide how you will generate and persist `thread_id` values per end-user session.\n- [ ] Use `/tables` and `/tables/{table}/schema` during bootstrap or as part of your prompt construction workflow.\n- [ ] Validate that the deployment supports the 10\u202f000-row cap before exposing large exports to users.\n- [ ] Parse `data_csv` using a streaming CSV reader for memory efficiency.\n- [ ] Monitor error responses and alert on sustained `500` or `401` trends.\n\nWith these practices in place, new projects can consistently leverage the Content Atlas public API to power conversational data exploration and large result exports.\n",
    "version": "1.0.0"
  },
  "paths": {
    "/map-data": {
      "post": {
        "tags": [
          "imports"
        ],
        "summary": "Map Data Endpoint",
        "description": "Map and import data from an uploaded file.\n\nThis endpoint accepts a file upload along with a mapping configuration,\nprocesses the file, and inserts the data into the database according to\nthe mapping rules.\n\nParameters:\n- file: The file to import (CSV, Excel, JSON, or XML)\n- mapping_json: JSON string containing the mapping configuration\n\nReturns:\n- Success status\n- Number of records processed\n- Number of duplicates skipped\n- Target table name",
        "operationId": "map_data_endpoint_map_data_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_map_data_endpoint_map_data_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MapDataResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/map-storage-data": {
      "post": {
        "tags": [
          "imports"
        ],
        "summary": "Map Storage Data Endpoint",
        "description": "Map and import data from a file stored in Backblaze B2.\n\nThis endpoint downloads a file from B2 storage, processes it according\nto the provided mapping configuration, and inserts the data into the database.\n\nParameters:\n- file_name: Name of the file in B2 storage\n- mapping: Mapping configuration object\n\nReturns:\n- Success status\n- Number of records processed\n- Target table name",
        "operationId": "map_storage_data_endpoint_map_storage_data_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MapB2DataRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MapDataResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/extract-b2-excel-csv": {
      "post": {
        "tags": [
          "imports"
        ],
        "summary": "Extract Storage Excel Csv Endpoint",
        "description": "Extract sheets from an Excel file in B2 storage to CSV format.\n\nThis endpoint downloads an Excel file from B2, extracts the specified\nnumber of rows from each sheet, and returns them in CSV format.\n\nParameters:\n- file_name: Name of the Excel file in B2 storage\n- rows: Number of rows to extract from each sheet\n\nReturns:\n- Success status\n- Dictionary of sheet names to CSV content",
        "operationId": "extract_storage_excel_csv_endpoint_extract_b2_excel_csv_post",
        "parameters": [
          {
            "name": "request",
            "in": "query",
            "required": true,
            "schema": {
              "title": "Request"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/detect-mapping": {
      "post": {
        "tags": [
          "mapping"
        ],
        "summary": "Detect Mapping Endpoint",
        "description": "Detect mapping configuration from an uploaded file.\n\nThis endpoint analyzes the structure of an uploaded file and automatically\ndetects column names, data types, and suggests a mapping configuration.\nIt also caches the parsed records to avoid re-parsing in /map-data.\n\nParameters:\n- file: The file to analyze (CSV, Excel, JSON, or XML)\n\nReturns:\n- Detected file type\n- Suggested mapping configuration\n- List of columns found\n- Number of rows sampled",
        "operationId": "detect_mapping_endpoint_detect_mapping_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_detect_mapping_endpoint_detect_mapping_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DetectB2MappingResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/detect-b2-mapping": {
      "post": {
        "tags": [
          "mapping"
        ],
        "summary": "Detect Storage Mapping Endpoint",
        "description": "Detect mapping configuration from a file in B2 storage.\n\nThis endpoint downloads a file from B2, analyzes its structure, and\nautomatically detects column names, data types, and suggests a mapping\nconfiguration.\n\nParameters:\n- file_name: Name of the file in B2 storage\n\nReturns:\n- Detected file type\n- Suggested mapping configuration\n- List of columns found\n- Number of rows sampled",
        "operationId": "detect_storage_mapping_endpoint_detect_b2_mapping_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DetectB2MappingRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DetectB2MappingResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/tables": {
      "get": {
        "tags": [
          "tables"
        ],
        "summary": "List Tables",
        "description": "List all dynamically created tables.\n\nReturns a list of all user-created tables in the database, excluding\nsystem tables and internal metadata tables.\n\nReturns:\n- List of table names with row counts",
        "operationId": "list_tables_tables_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TablesListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/tables/{table_name}": {
      "get": {
        "tags": [
          "tables"
        ],
        "summary": "Query Table",
        "description": "Query table data with pagination, optional search, sorting, and filtering.\n\nParameters:\n- import_id: Optional UUID to filter rows by specific import",
        "operationId": "query_table_tables__table_name__get",
        "parameters": [
          {
            "name": "table_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Table Name"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "import_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Import Id"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Search"
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Sort By"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "asc",
              "title": "Sort Order"
            }
          },
          {
            "name": "filters",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "JSON list of filters: [{\"column\":\"status\",\"operator\":\"eq\",\"value\":\"Active\"}]",
              "title": "Filters"
            },
            "description": "JSON list of filters: [{\"column\":\"status\",\"operator\":\"eq\",\"value\":\"Active\"}]"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TableDataResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "tables"
        ],
        "summary": "Delete Table",
        "description": "Delete a user-created table and clean up all related records.\n\nThis endpoint:\n1. Drops the table from the database\n2. Cleans up import_history records\n3. Cleans up file_imports records\n4. Resets uploaded_files status to 'uploaded' (unmapped)\n\nParameters:\n- table_name: Name of the table to delete\n\nReturns:\n- Success status and cleanup summary",
        "operationId": "delete_table_tables__table_name__delete",
        "parameters": [
          {
            "name": "table_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Table Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/tables/{table_name}/export": {
      "get": {
        "tags": [
          "tables"
        ],
        "summary": "Export Table",
        "description": "Stream the full contents of a user table as CSV.\n\nThe export excludes metadata columns (prefixed with \"_\") and returns a streaming\nCSV response so large tables do not exhaust memory.",
        "operationId": "export_table_tables__table_name__export_get",
        "parameters": [
          {
            "name": "table_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Table Name"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 1000000,
                  "minimum": 1
                },
                {
                  "type": "null"
                }
              ],
              "description": "Optional maximum number of rows to include in the export",
              "title": "Limit"
            },
            "description": "Optional maximum number of rows to include in the export"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/tables/{table_name}/schema": {
      "get": {
        "tags": [
          "tables"
        ],
        "summary": "Get Table Schema",
        "description": "Get table column information.\n\nReturns detailed schema information for a specific table, including\ncolumn names, data types, and nullability.\n\nParameters:\n- table_name: Name of the table\n\nReturns:\n- Table schema with column details",
        "operationId": "get_table_schema_tables__table_name__schema_get",
        "parameters": [
          {
            "name": "table_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Table Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TableSchemaResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/tables/{table_name}/stats": {
      "get": {
        "tags": [
          "tables"
        ],
        "summary": "Get Table Stats",
        "description": "Get basic table statistics.\n\nReturns summary statistics for a table including row count,\ncolumn count, and data type distribution.\n\nParameters:\n- table_name: Name of the table\n\nReturns:\n- Table statistics",
        "operationId": "get_table_stats_tables__table_name__stats_get",
        "parameters": [
          {
            "name": "table_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Table Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TableStatsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/tables/{table_name}/lineage": {
      "get": {
        "tags": [
          "tables"
        ],
        "summary": "Get Table Lineage",
        "description": "Get import lineage for a specific table - all imports that contributed data.\n\nParameters:\n- table_name: Name of the table to get lineage for\n\nReturns:\n- List of imports that contributed to this table\n- Total rows contributed",
        "operationId": "get_table_lineage_tables__table_name__lineage_get",
        "parameters": [
          {
            "name": "table_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Table Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/map-b2-data-async": {
      "post": {
        "tags": [
          "tasks"
        ],
        "summary": "Map Storage Data Async Endpoint",
        "description": "Start async processing of B2 data.\n\nThis endpoint queues a background task to process a large file from B2\nstorage. Use the returned task_id to check progress via /tasks/{task_id}.\n\nParameters:\n- file_name: Name of the file in B2 storage\n- mapping: Mapping configuration\n\nReturns:\n- Task ID for tracking progress\n- Initial task status",
        "operationId": "map_storage_data_async_endpoint_map_b2_data_async_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MapB2DataAsyncRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AsyncTaskStatus"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/tasks/{task_id}": {
      "get": {
        "tags": [
          "tasks"
        ],
        "summary": "Get Task Status",
        "description": "Get the status of an async task.\n\nPoll this endpoint to check the progress of a background task\nstarted via /map-b2-data-async.\n\nParameters:\n- task_id: UUID of the task\n\nReturns:\n- Current task status\n- Progress percentage (if available)\n- Result (if completed)\n- Error message (if failed)",
        "operationId": "get_task_status_tasks__task_id__get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AsyncTaskStatus"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/query-conversations/latest": {
      "get": {
        "tags": [
          "query"
        ],
        "summary": "Get Latest Conversation",
        "description": "Load the most recent Query Database conversation from Postgres.",
        "operationId": "get_latest_conversation_query_conversations_latest_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueryConversationResponse"
                }
              }
            }
          }
        }
      }
    },
    "/query-conversations/{thread_id}": {
      "get": {
        "tags": [
          "query"
        ],
        "summary": "Get Conversation",
        "description": "Load a saved conversation by thread ID.",
        "operationId": "get_conversation_query_conversations__thread_id__get",
        "parameters": [
          {
            "name": "thread_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Thread Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueryConversationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/query-conversations": {
      "get": {
        "tags": [
          "query"
        ],
        "summary": "List Conversations",
        "description": "List saved query conversations ordered by most recently updated.",
        "operationId": "list_conversations_query_conversations_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueryConversationListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/query-database": {
      "post": {
        "tags": [
          "query"
        ],
        "summary": "Query Database Endpoint",
        "description": "Execute natural language queries against the database using LangChain agent with conversation memory.\n\nThe agent remembers previous queries within the same thread_id, allowing for:\n- Follow-up questions: \"Now filter for California only\"\n- References to past results: \"What was the total from the last query?\"\n- Context-aware queries: \"Show products\" \u2192 \"Which of those have low stock?\"\n\nParameters:\n- prompt: Natural language query\n- max_rows: Maximum rows to return (1-10000)\n- thread_id: Optional conversation thread ID for memory continuity\n\nReturns:\n- Natural language response\n- Executed SQL query\n- Results in CSV format\n- Execution metadata",
        "operationId": "query_database_endpoint_api_v1_query_database_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QueryDatabaseRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueryDatabaseResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/query-conversations/latest": {
      "get": {
        "tags": [
          "query"
        ],
        "summary": "Get Latest Conversation",
        "description": "Load the most recent Query Database conversation from Postgres.",
        "operationId": "get_latest_conversation_api_v1_query_conversations_latest_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueryConversationResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/query-conversations/{thread_id}": {
      "get": {
        "tags": [
          "query"
        ],
        "summary": "Get Conversation",
        "description": "Load a saved conversation by thread ID.",
        "operationId": "get_conversation_api_v1_query_conversations__thread_id__get",
        "parameters": [
          {
            "name": "thread_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Thread Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueryConversationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/query-conversations": {
      "get": {
        "tags": [
          "query"
        ],
        "summary": "List Conversations",
        "description": "List saved query conversations ordered by most recently updated.",
        "operationId": "list_conversations_api_v1_query_conversations_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueryConversationListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/analyze-file": {
      "post": {
        "tags": [
          "analysis"
        ],
        "summary": "Analyze File Endpoint",
        "description": "Analyze uploaded file and recommend import strategy using AI.\n\nThis endpoint uses Claude Sonnet to intelligently analyze the file structure,\ncompare it with existing database tables, and recommend the best import strategy.\n\nParameters:\n- file: The file to analyze (CSV, Excel, JSON, or XML) - optional if file_id provided\n- file_id: UUID of previously uploaded file - optional if file provided\n- sample_size: Number of rows to sample (auto-calculated if not provided)\n- analysis_mode: MANUAL (user approval), AUTO_HIGH_CONFIDENCE, or AUTO_ALWAYS\n- conflict_resolution: ASK_USER, LLM_DECIDE, or PREFER_FLEXIBLE\n- auto_execute_confidence_threshold: Minimum confidence for auto-execution (0.0-1.0)\n- max_iterations: Maximum LLM iterations (1-10)",
        "operationId": "analyze_file_endpoint_analyze_file_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_analyze_file_endpoint_analyze_file_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalyzeFileResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/workbooks/{file_id}/sheets": {
      "get": {
        "tags": [
          "analysis"
        ],
        "summary": "List Workbook Sheets Endpoint",
        "description": "Return sheet names for an uploaded Excel workbook.",
        "operationId": "list_workbook_sheets_endpoint_workbooks__file_id__sheets_get",
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "File Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkbookSheetsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/auto-process-archive": {
      "post": {
        "tags": [
          "analysis"
        ],
        "summary": "Auto Process Archive Endpoint",
        "description": "Queue background processing for every supported file contained within a ZIP archive.\n\nThe endpoint returns immediately with a job id so the request lifecycle\ndoes not control the processing. Results are persisted to the import job\nmetadata and can be fetched via /import-jobs/{job_id}.",
        "operationId": "auto_process_archive_endpoint_auto_process_archive_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_auto_process_archive_endpoint_auto_process_archive_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ArchiveAutoProcessResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/auto-process-archive/resume": {
      "post": {
        "tags": [
          "analysis"
        ],
        "summary": "Resume Auto Process Archive Endpoint",
        "description": "Resume archive auto-processing using a previous job for state.\n\nBy default, only failed or unprocessed entries from the referenced job\nare retried. Set resume_failed_entries_only=False to reprocess the entire\narchive from scratch.",
        "operationId": "resume_auto_process_archive_endpoint_auto_process_archive_resume_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_resume_auto_process_archive_endpoint_auto_process_archive_resume_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ArchiveAutoProcessResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/auto-process-workbook": {
      "post": {
        "tags": [
          "analysis"
        ],
        "summary": "Auto Process Workbook Endpoint",
        "description": "Auto-process each sheet in an Excel workbook as independent imports.\n\nBehaves similarly to archive auto-processing: each sheet is uploaded as a\nseparate file (named with the workbook + sheet) and processed in parallel.",
        "operationId": "auto_process_workbook_endpoint_auto_process_workbook_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_auto_process_workbook_endpoint_auto_process_workbook_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ArchiveAutoProcessResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/analyze-b2-file": {
      "post": {
        "tags": [
          "analysis"
        ],
        "summary": "Analyze Storage File Endpoint",
        "description": "Analyze a file from B2 storage and recommend import strategy using AI.\n\nThis endpoint downloads a file from Backblaze B2, then uses Claude Sonnet\nto analyze its structure and recommend the best import strategy.",
        "operationId": "analyze_storage_file_endpoint_analyze_b2_file_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AnalyzeB2FileRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalyzeFileResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/execute-recommended-import": {
      "post": {
        "tags": [
          "analysis"
        ],
        "summary": "Execute Recommended Import Endpoint",
        "description": "Execute a previously analyzed import recommendation.\n\nThis endpoint takes an analysis ID from a previous /analyze-file or /analyze-b2-file\ncall and executes the recommended import strategy. Users can optionally modify\nthe suggested mapping before execution.",
        "operationId": "execute_recommended_import_endpoint_execute_recommended_import_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExecuteRecommendedImportRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MapDataResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/analyze-file-interactive": {
      "post": {
        "tags": [
          "analysis"
        ],
        "summary": "Analyze File Interactive Endpoint",
        "operationId": "analyze_file_interactive_endpoint_analyze_file_interactive_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AnalyzeFileInteractiveRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/execute-interactive-import": {
      "post": {
        "tags": [
          "analysis"
        ],
        "summary": "Execute Interactive Import Endpoint",
        "operationId": "execute_interactive_import_endpoint_execute_interactive_import_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExecuteInteractiveImportRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/llm-instructions": {
      "get": {
        "tags": [
          "llm-instructions"
        ],
        "summary": "List Instructions",
        "description": "Return recently saved LLM instruction profiles.",
        "operationId": "list_instructions_llm_instructions_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LlmInstructionListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "llm-instructions"
        ],
        "summary": "Create Instruction",
        "description": "Save a reusable LLM instruction profile.",
        "operationId": "create_instruction_llm_instructions_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateLlmInstructionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LlmInstructionProfile"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/llm-instructions/{instruction_id}": {
      "get": {
        "tags": [
          "llm-instructions"
        ],
        "summary": "Get Instruction",
        "description": "Fetch a specific instruction profile.",
        "operationId": "get_instruction_llm_instructions__instruction_id__get",
        "parameters": [
          {
            "name": "instruction_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Instruction Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LlmInstructionProfile"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "llm-instructions"
        ],
        "summary": "Update Instruction",
        "description": "Update an instruction profile (title, content).",
        "operationId": "update_instruction_llm_instructions__instruction_id__patch",
        "parameters": [
          {
            "name": "instruction_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Instruction Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateLlmInstructionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LlmInstructionProfile"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "llm-instructions"
        ],
        "summary": "Update Instruction",
        "description": "Update an instruction profile (title, content).",
        "operationId": "update_instruction_llm_instructions__instruction_id__put",
        "parameters": [
          {
            "name": "instruction_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Instruction Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateLlmInstructionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LlmInstructionProfile"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "llm-instructions"
        ],
        "summary": "Delete Instruction",
        "description": "Delete an instruction profile.",
        "operationId": "delete_instruction_llm_instructions__instruction_id__delete",
        "parameters": [
          {
            "name": "instruction_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Instruction Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/import-history": {
      "get": {
        "tags": [
          "import-history"
        ],
        "summary": "List Import History",
        "description": "List import history with optional filters.\n\nParameters:\n- table_name: Filter by destination table name\n- user_id: Filter by user ID\n- status: Filter by status ('success', 'failed', 'partial')\n- file_name: Filter by original file name\n- file_hash: Filter by SHA-256 hash\n- source_path: Filter by stored source path (e.g. B2 key)\n- file_size_bytes: Filter by file size recorded during import\n- limit: Maximum number of records to return (default: 100)\n- offset: Number of records to skip for pagination (default: 0)",
        "operationId": "list_import_history_import_history_get",
        "parameters": [
          {
            "name": "table_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Table Name"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "User Id"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "name": "file_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "File Name"
            }
          },
          {
            "name": "file_hash",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "File Hash"
            }
          },
          {
            "name": "source_path",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Source Path"
            }
          },
          {
            "name": "file_size_bytes",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "File Size Bytes"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImportHistoryListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/import-history/{import_id}": {
      "get": {
        "tags": [
          "import-history"
        ],
        "summary": "Get Import Detail",
        "description": "Get detailed information about a specific import.\n\nParameters:\n- import_id: UUID of the import to retrieve",
        "operationId": "get_import_detail_import_history__import_id__get",
        "parameters": [
          {
            "name": "import_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Import Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImportHistoryDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/import-history/statistics": {
      "get": {
        "tags": [
          "import-history"
        ],
        "summary": "Get Import Statistics Endpoint",
        "description": "Get aggregate statistics about imports.\n\nParameters:\n- table_name: Filter by destination table name\n- user_id: Filter by user ID\n- days: Number of days to look back (default: 30)",
        "operationId": "get_import_statistics_endpoint_import_history_statistics_get",
        "parameters": [
          {
            "name": "table_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Table Name"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "User Id"
            }
          },
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 30,
              "title": "Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImportStatisticsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/import-history/{import_id}/duplicates": {
      "get": {
        "tags": [
          "import-history"
        ],
        "summary": "Get Import Duplicate Rows",
        "description": "Retrieve duplicate rows that were detected during an import.",
        "operationId": "get_import_duplicate_rows_import_history__import_id__duplicates_get",
        "parameters": [
          {
            "name": "import_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Import Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImportDuplicateRowsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/import-history/{import_id}/duplicates/{duplicate_id}": {
      "get": {
        "tags": [
          "import-history"
        ],
        "summary": "Get Duplicate Row Detail Endpoint",
        "operationId": "get_duplicate_row_detail_endpoint_import_history__import_id__duplicates__duplicate_id__get",
        "parameters": [
          {
            "name": "import_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Import Id"
            }
          },
          {
            "name": "duplicate_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Duplicate Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DuplicateDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/import-history/{import_id}/duplicates/{duplicate_id}/merge": {
      "post": {
        "tags": [
          "import-history"
        ],
        "summary": "Merge Duplicate Row Endpoint",
        "operationId": "merge_duplicate_row_endpoint_import_history__import_id__duplicates__duplicate_id__merge_post",
        "parameters": [
          {
            "name": "import_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Import Id"
            }
          },
          {
            "name": "duplicate_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Duplicate Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DuplicateMergeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DuplicateMergeResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/import-statistics": {
      "get": {
        "tags": [
          "import-history"
        ],
        "summary": "Get Import Statistics Root",
        "operationId": "get_import_statistics_root_import_statistics_get",
        "parameters": [
          {
            "name": "table_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Table Name"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "User Id"
            }
          },
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 30,
              "title": "Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImportStatisticsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/upload-to-b2": {
      "post": {
        "tags": [
          "uploads"
        ],
        "summary": "Upload File To Storage Endpoint",
        "description": "Upload a file to Backblaze B2 storage.\n\nParameters:\n- file: The file to upload\n- allow_duplicate: If true, allow uploading file with same name (creates new ID)\n\nReturns:\n- File metadata including B2 file ID and upload status",
        "operationId": "upload_file_to_storage_endpoint_upload_to_b2_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_file_to_storage_endpoint_upload_to_b2_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadFileResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/upload-to-b2/overwrite": {
      "post": {
        "tags": [
          "uploads"
        ],
        "summary": "Overwrite File In Storage Endpoint",
        "description": "Overwrite an existing file in B2 storage.\n\nParameters:\n- file: The file to upload (will replace existing file with same name)\n\nReturns:\n- Updated file metadata",
        "operationId": "overwrite_file_in_storage_endpoint_upload_to_b2_overwrite_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_overwrite_file_in_storage_endpoint_upload_to_b2_overwrite_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadFileResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/uploaded-files": {
      "get": {
        "tags": [
          "uploads"
        ],
        "summary": "List Uploaded Files Endpoint",
        "description": "List uploaded files with optional status filter.\n\nParameters:\n- status: Filter by status ('uploaded', 'mapping', 'mapped', 'failed')\n- limit: Maximum number of files to return (default: 100)\n- offset: Number of files to skip for pagination (default: 0)\n\nReturns:\n- List of uploaded files with metadata",
        "operationId": "list_uploaded_files_endpoint_uploaded_files_get",
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadedFilesListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/uploaded-files/{file_id}": {
      "get": {
        "tags": [
          "uploads"
        ],
        "summary": "Get Uploaded File Endpoint",
        "description": "Get details of a specific uploaded file.\n\nParameters:\n- file_id: UUID of the uploaded file\n\nReturns:\n- File metadata and status",
        "operationId": "get_uploaded_file_endpoint_uploaded_files__file_id__get",
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "File Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadedFileDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "uploads"
        ],
        "summary": "Delete Uploaded File Endpoint",
        "description": "Delete an uploaded file from B2 and database.\n\nParameters:\n- file_id: UUID of the uploaded file to delete\n- delete_table_data: If true, remove rows from the mapped table that were created by this upload\n\nReturns:\n- Success message",
        "operationId": "delete_uploaded_file_endpoint_uploaded_files__file_id__delete",
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "File Id"
            }
          },
          {
            "name": "delete_table_data",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Also delete imported rows and history linked to this file's mapped table",
              "default": false,
              "title": "Delete Table Data"
            },
            "description": "Also delete imported rows and history linked to this file's mapped table"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteFileResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/uploaded-files/{file_id}/status": {
      "patch": {
        "tags": [
          "uploads"
        ],
        "summary": "Update File Status Endpoint",
        "description": "Update the status of an uploaded file.\n\nParameters:\n- file_id: UUID of the uploaded file\n- status: New status ('uploaded', 'mapping', 'mapped', 'failed')\n- mapped_table_name: Table name if status is 'mapped'\n- mapped_rows: Number of rows if status is 'mapped'\n\nReturns:\n- Updated file metadata",
        "operationId": "update_file_status_endpoint_uploaded_files__file_id__status_patch",
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "File Id"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Status"
            }
          },
          {
            "name": "mapped_table_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Mapped Table Name"
            }
          },
          {
            "name": "mapped_rows",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Mapped Rows"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadedFileDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/check-duplicate": {
      "post": {
        "tags": [
          "uploads"
        ],
        "summary": "Check Duplicate Endpoint",
        "description": "Check if a file is a duplicate before uploading.\n\nThis lightweight endpoint checks if a file with the same hash already exists\nin the database. If not, it generates upload authorization for direct\nbrowser-to-B2 upload.\n\nParameters:\n- file_name: Name of the file\n- file_hash: SHA-256 hash of the file content\n- file_size: Size of the file in bytes\n\nReturns:\n- is_duplicate: Whether the file already exists\n- can_upload: Whether the file can be uploaded\n- upload_authorization: B2 credentials for direct upload (if can_upload=true)",
        "operationId": "check_duplicate_endpoint_check_duplicate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CheckDuplicateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CheckDuplicateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/complete-upload": {
      "post": {
        "tags": [
          "uploads"
        ],
        "summary": "Complete Upload Endpoint",
        "description": "Complete the upload process after direct browser-to-B2 upload.\n\nThis endpoint is called by the frontend after successfully uploading\na file directly to B2. It saves the file metadata in the database.\n\nParameters:\n- file_name: Name of the uploaded file\n- file_hash: SHA-256 hash of the file content\n- file_size: Size of the file in bytes\n- content_type: MIME type of the file\n- b2_file_id: B2 file ID returned from upload\n- b2_file_path: Full path in B2 bucket\n\nReturns:\n- File metadata record",
        "operationId": "complete_upload_endpoint_complete_upload_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CompleteUploadRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CompleteUploadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/start-multipart-upload": {
      "post": {
        "tags": [
          "uploads"
        ],
        "summary": "Start Multipart Upload Endpoint",
        "description": "Start a multipart upload for large files (>10MB).\n\nThis endpoint initiates a multipart upload session and returns presigned URLs\nfor each part, allowing the browser to upload chunks in parallel directly to B2.\n\nParameters:\n- file_name: Name of the file to upload\n- file_size: Total size of the file in bytes\n- file_hash: SHA-256 hash of the file content\n- content_type: Optional MIME type of the file\n\nReturns:\n- upload_id: Unique identifier for this multipart upload session\n- file_path: Full path where the file will be stored\n- part_size: Size of each part in bytes\n- total_parts: Number of parts the file will be split into\n- part_urls: List of presigned URLs for uploading each part",
        "operationId": "start_multipart_upload_endpoint_start_multipart_upload_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StartMultipartUploadRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StartMultipartUploadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/complete-multipart-upload": {
      "post": {
        "tags": [
          "uploads"
        ],
        "summary": "Complete Multipart Upload Endpoint",
        "description": "Complete a multipart upload after all parts have been uploaded.\n\nThis endpoint finalizes the multipart upload by combining all parts into\na single file and saving the metadata to the database.\n\nParameters:\n- file_name: Name of the uploaded file\n- file_hash: SHA-256 hash of the file content\n- file_size: Total size of the file in bytes\n- content_type: MIME type of the file\n- upload_id: The multipart upload session ID\n- file_path: Full path in B2 bucket\n- parts: List of uploaded parts with PartNumber and ETag\n\nReturns:\n- File metadata record",
        "operationId": "complete_multipart_upload_endpoint_complete_multipart_upload_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CompleteMultipartUploadRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CompleteMultipartUploadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/abort-multipart-upload": {
      "post": {
        "tags": [
          "uploads"
        ],
        "summary": "Abort Multipart Upload Endpoint",
        "description": "Abort a multipart upload and clean up any uploaded parts.\n\nThis should be called if the upload fails or is cancelled to clean up\nstorage space and avoid charges for incomplete uploads.\n\nParameters:\n- upload_id: The multipart upload session ID\n- file_path: Full path in B2 bucket\n\nReturns:\n- Success message",
        "operationId": "abort_multipart_upload_endpoint_abort_multipart_upload_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AbortMultipartUploadRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AbortMultipartUploadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/auth/register": {
      "post": {
        "tags": [
          "authentication"
        ],
        "summary": "Register",
        "description": "Register a new user.\n\nParameters:\n- email: User's email address\n- password: User's password (will be hashed)\n- full_name: Optional full name\n\nReturns:\n- JWT access token\n- User information",
        "operationId": "register_auth_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegister"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": [
          "authentication"
        ],
        "summary": "Login",
        "description": "Login with email and password.\n\nParameters:\n- email: User's email address\n- password: User's password\n\nReturns:\n- JWT access token\n- User information",
        "operationId": "login_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLogin"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/auth/me": {
      "get": {
        "tags": [
          "authentication"
        ],
        "summary": "Get Current User Info",
        "description": "Get current authenticated user information.\n\nRequires: Bearer token in Authorization header\n\nReturns:\n- User information",
        "operationId": "get_current_user_info_auth_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/auth/bootstrap-status": {
      "get": {
        "tags": [
          "authentication"
        ],
        "summary": "Get Bootstrap Status",
        "description": "Return whether the deployment still needs an initial admin account.",
        "operationId": "get_bootstrap_status_auth_bootstrap_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BootstrapStatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/admin/api-keys": {
      "post": {
        "tags": [
          "api-keys"
        ],
        "summary": "Create Api Key Endpoint",
        "description": "Create a new API key (Admin only).\n\nThis endpoint generates a new API key for external application access.\nThe plain API key is only shown once and cannot be retrieved later.\n\nRequires: JWT authentication (Bearer token)\n\nParameters:\n- app_name: Name of the application\n- description: Optional description\n- expires_in_days: Optional expiration in days\n- rate_limit_per_minute: Rate limit (default 60)\n- allowed_endpoints: Optional list of allowed endpoint patterns\n\nReturns:\n- The generated API key (only shown once)\n- API key metadata",
        "operationId": "create_api_key_endpoint_admin_api_keys_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateApiKeyRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateApiKeyResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "api-keys"
        ],
        "summary": "List Api Keys Endpoint",
        "description": "List all API keys (Admin only).\n\nRequires: JWT authentication (Bearer token)\n\nParameters:\n- is_active: Filter by active status\n- limit: Maximum number of keys to return\n- offset: Number of keys to skip\n\nReturns:\n- List of API keys (without the actual key values)",
        "operationId": "list_api_keys_endpoint_admin_api_keys_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "is_active",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Is Active"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListApiKeysResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/api-keys/{key_id}": {
      "delete": {
        "tags": [
          "api-keys"
        ],
        "summary": "Delete Api Key Endpoint",
        "description": "Permanently delete an API key (Admin only).\n\nRequires: JWT authentication (Bearer token)\n\nParameters:\n- key_id: UUID of the API key to delete\n\nReturns:\n- Success message",
        "operationId": "delete_api_key_endpoint_admin_api_keys__key_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "key_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Key Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RevokeApiKeyResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "api-keys"
        ],
        "summary": "Update Api Key Endpoint",
        "description": "Update an API key's settings (Admin only).\n\nRequires: JWT authentication (Bearer token)\n\nParameters:\n- key_id: UUID of the API key to update\n- description: Optional new description\n- rate_limit_per_minute: Optional new rate limit\n- allowed_endpoints: Optional new allowed endpoints list\n- is_active: Optional active status\n\nReturns:\n- Updated API key metadata",
        "operationId": "update_api_key_endpoint_admin_api_keys__key_id__patch",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "key_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Key Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateApiKeyRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateApiKeyResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/query": {
      "post": {
        "tags": [
          "public-api"
        ],
        "summary": "Run Natural Language Query",
        "description": "Translates a natural language prompt into SQL, executes it, and returns both a conversational summary and CSV data.",
        "operationId": "public_query_database_endpoint_api_v1_query_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QueryDatabaseRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueryDatabaseResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "APIKeyHeader": []
          }
        ]
      }
    },
    "/api/v1/generate-sql": {
      "post": {
        "tags": [
          "public-api"
        ],
        "summary": "Generate SQL from Natural Language",
        "description": "Lightweight endpoint that converts natural language to SQL without executing it. Designed for the probe phase of large export workflows.",
        "operationId": "public_generate_sql_endpoint_api_v1_generate_sql_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GenerateSQLRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenerateSQLResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "APIKeyHeader": []
          }
        ]
      }
    },
    "/api/v1/tables": {
      "get": {
        "tags": [
          "public-api"
        ],
        "summary": "List Available Tables",
        "description": "Lists all user-accessible tables along with their current row counts.",
        "operationId": "public_list_tables_endpoint_api_v1_tables_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TablesListResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "APIKeyHeader": []
          }
        ]
      }
    },
    "/api/v1/tables/{table_name}/schema": {
      "get": {
        "tags": [
          "public-api"
        ],
        "summary": "Get Table Schema",
        "description": "Returns detailed column information for a specific table to help with validation or prompt construction.",
        "operationId": "public_get_table_schema_endpoint_api_v1_tables__table_name__schema_get",
        "security": [
          {
            "APIKeyHeader": []
          }
        ],
        "parameters": [
          {
            "name": "table_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Table Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TableSchemaResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/import-jobs/{job_id}": {
      "get": {
        "tags": [
          "import-jobs"
        ],
        "summary": "Get Import Job Endpoint",
        "operationId": "get_import_job_endpoint_import_jobs__job_id__get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImportJobResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/import-jobs": {
      "get": {
        "tags": [
          "import-jobs"
        ],
        "summary": "List Import Jobs Endpoint",
        "operationId": "list_import_jobs_endpoint_import_jobs_get",
        "parameters": [
          {
            "name": "file_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "File Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImportJobListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/users": {
      "get": {
        "tags": [
          "admin-users"
        ],
        "summary": "List Users",
        "description": "List all users in the system. Admin access only.",
        "operationId": "list_users_admin_users_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminListUsersResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "admin-users"
        ],
        "summary": "Create User Admin",
        "description": "Create a user (admin or standard) via the admin console.",
        "operationId": "create_user_admin_admin_users_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminCreateUserRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminCreateUserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/admin/users/{user_id}/password": {
      "patch": {
        "tags": [
          "admin-users"
        ],
        "summary": "Set User Password Admin",
        "description": "Reset a user's password. Admin access only.",
        "operationId": "set_user_password_admin_admin_users__user_id__password_patch",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminSetPasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminSetPasswordResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/admin/users/{user_id}": {
      "delete": {
        "tags": [
          "admin-users"
        ],
        "summary": "Delete User Admin",
        "description": "Delete a user. Admin access only.",
        "operationId": "delete_user_admin_admin_users__user_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminDeleteUserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/export/query": {
      "post": {
        "tags": [
          "export"
        ],
        "summary": "Export Query",
        "description": "Execute a SQL query and stream results as CSV download.\n\nThis endpoint is designed for large data exports and bypasses the LLM agent.\nIt supports queries returning up to 100,000 rows (configurable via EXPORT_ROW_LIMIT).\n\n**Security:**\n- Only SELECT queries allowed\n- No access to protected system tables\n- 120-second timeout (configurable via EXPORT_TIMEOUT_SECONDS)\n- Requires API key authentication\n\n**Example Request:**\n```json\n{\n    \"sql_query\": \"SELECT * FROM customers LIMIT 50000\",\n    \"filename\": \"customers_export.csv\"\n}\n```\n\n**Response:**\n- Returns a CSV file download\n- Content-Disposition header triggers automatic download",
        "operationId": "export_query_api_export_query_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExportQueryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "APIKeyHeader": []
          }
        ]
      }
    },
    "/api/export/health": {
      "get": {
        "tags": [
          "export"
        ],
        "summary": "Export Health",
        "description": "Health check endpoint for export service (no authentication required).",
        "operationId": "export_health_api_export_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "Root endpoint returning API information.",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Health check endpoint for Railway deployment monitoring.",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AbortMultipartUploadRequest": {
        "properties": {
          "upload_id": {
            "type": "string",
            "title": "Upload Id"
          },
          "file_path": {
            "type": "string",
            "title": "File Path"
          }
        },
        "type": "object",
        "required": [
          "upload_id",
          "file_path"
        ],
        "title": "AbortMultipartUploadRequest",
        "description": "Request to abort a multipart upload"
      },
      "AbortMultipartUploadResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "AbortMultipartUploadResponse",
        "description": "Response from aborting multipart upload"
      },
      "AdminCreateUserRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password": {
            "type": "string",
            "title": "Password"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "user"
            ],
            "title": "Role",
            "default": "user"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "AdminCreateUserRequest",
        "description": "Payload for creating a user as an administrator."
      },
      "AdminCreateUserResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "user": {
            "$ref": "#/components/schemas/UserResponse"
          }
        },
        "type": "object",
        "required": [
          "success",
          "user"
        ],
        "title": "AdminCreateUserResponse",
        "description": "Response returned when a user is created by an admin."
      },
      "AdminDeleteUserResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "deleted_user_id": {
            "type": "integer",
            "title": "Deleted User Id"
          }
        },
        "type": "object",
        "required": [
          "success",
          "deleted_user_id"
        ],
        "title": "AdminDeleteUserResponse",
        "description": "Response returned when deleting a user."
      },
      "AdminListUsersResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "users": {
            "items": {
              "$ref": "#/components/schemas/UserResponse"
            },
            "type": "array",
            "title": "Users"
          }
        },
        "type": "object",
        "required": [
          "success",
          "users"
        ],
        "title": "AdminListUsersResponse",
        "description": "Response with the current set of users."
      },
      "AdminSetPasswordRequest": {
        "properties": {
          "password": {
            "type": "string",
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "password"
        ],
        "title": "AdminSetPasswordRequest",
        "description": "Payload for resetting a user's password."
      },
      "AdminSetPasswordResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "user": {
            "$ref": "#/components/schemas/UserResponse"
          }
        },
        "type": "object",
        "required": [
          "success",
          "user"
        ],
        "title": "AdminSetPasswordResponse",
        "description": "Response returned after updating a user's password."
      },
      "AnalysisMode": {
        "type": "string",
        "enum": [
          "manual",
          "auto_high",
          "auto_always",
          "interactive"
        ],
        "title": "AnalysisMode",
        "description": "Controls auto-execution behavior"
      },
      "AnalyzeB2FileRequest": {
        "properties": {
          "file_name": {
            "type": "string",
            "title": "File Name"
          },
          "sample_size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sample Size"
          },
          "analysis_mode": {
            "$ref": "#/components/schemas/AnalysisMode",
            "default": "manual"
          },
          "conflict_resolution": {
            "$ref": "#/components/schemas/ConflictResolutionMode",
            "default": "ask_user"
          },
          "auto_execute_confidence_threshold": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Auto Execute Confidence Threshold",
            "default": 0.9
          },
          "max_iterations": {
            "type": "integer",
            "maximum": 10.0,
            "minimum": 1.0,
            "title": "Max Iterations",
            "default": 5
          },
          "llm_instruction": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction"
          },
          "llm_instruction_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction Id"
          },
          "save_llm_instruction": {
            "type": "boolean",
            "title": "Save Llm Instruction",
            "default": false
          },
          "llm_instruction_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction Title"
          },
          "require_explicit_multi_value": {
            "type": "boolean",
            "title": "Require Explicit Multi Value",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "file_name"
        ],
        "title": "AnalyzeB2FileRequest",
        "description": "Request to analyze a B2 file"
      },
      "AnalyzeFileInteractiveRequest": {
        "properties": {
          "file_id": {
            "type": "string",
            "title": "File Id"
          },
          "sheet_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sheet Name"
          },
          "user_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Message"
          },
          "thread_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thread Id"
          },
          "max_iterations": {
            "type": "integer",
            "maximum": 10.0,
            "minimum": 1.0,
            "title": "Max Iterations",
            "default": 5
          },
          "previous_error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Previous Error Message"
          },
          "llm_instruction": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction"
          },
          "llm_instruction_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction Id"
          },
          "save_llm_instruction": {
            "type": "boolean",
            "title": "Save Llm Instruction",
            "default": false
          },
          "llm_instruction_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction Title"
          },
          "require_explicit_multi_value": {
            "type": "boolean",
            "title": "Require Explicit Multi Value",
            "default": false
          },
          "target_table_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Table Name"
          },
          "target_table_mode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Table Mode"
          },
          "skip_file_duplicate_check": {
            "type": "boolean",
            "title": "Skip File Duplicate Check",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "file_id"
        ],
        "title": "AnalyzeFileInteractiveRequest",
        "description": "Request for interactive file analysis with conversation"
      },
      "AnalyzeFileResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "llm_response": {
            "type": "string",
            "title": "Llm Response"
          },
          "suggested_mapping": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MappingConfig"
              },
              {
                "type": "null"
              }
            ]
          },
          "llm_decision": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Decision"
          },
          "conflicts": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/SchemaConflict"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conflicts"
          },
          "confidence_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence Score"
          },
          "can_auto_execute": {
            "type": "boolean",
            "title": "Can Auto Execute",
            "default": false
          },
          "iterations_used": {
            "type": "integer",
            "title": "Iterations Used",
            "default": 0
          },
          "max_iterations": {
            "type": "integer",
            "title": "Max Iterations",
            "default": 5
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Id"
          },
          "auto_execution_result": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AutoExecutionResult"
              },
              {
                "type": "null"
              }
            ]
          },
          "auto_retry_execution_result": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MapDataResponse"
              },
              {
                "type": "null"
              }
            ]
          },
          "auto_execution_error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Execution Error"
          },
          "auto_retry_attempted": {
            "type": "boolean",
            "title": "Auto Retry Attempted",
            "default": false
          },
          "auto_retry_error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Retry Error"
          },
          "needs_user_input": {
            "type": "boolean",
            "title": "Needs User Input",
            "default": false
          },
          "llm_instruction_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction Id"
          }
        },
        "type": "object",
        "required": [
          "success",
          "llm_response"
        ],
        "title": "AnalyzeFileResponse",
        "description": "Response from file analysis"
      },
      "ApiKeyInfo": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "app_name": {
            "type": "string",
            "title": "App Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "last_used_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used At"
          },
          "expires_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expires At"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "rate_limit_per_minute": {
            "type": "integer",
            "title": "Rate Limit Per Minute"
          },
          "allowed_endpoints": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Allowed Endpoints"
          },
          "key_preview": {
            "type": "string",
            "title": "Key Preview",
            "description": "Last 4 characters of the key for identification"
          }
        },
        "type": "object",
        "required": [
          "id",
          "app_name",
          "created_at",
          "is_active",
          "rate_limit_per_minute",
          "key_preview"
        ],
        "title": "ApiKeyInfo",
        "description": "Information about an API key (without the actual key)."
      },
      "ArchiveAutoProcessFileResult": {
        "properties": {
          "archive_path": {
            "type": "string",
            "title": "Archive Path"
          },
          "stored_file_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stored File Name"
          },
          "uploaded_file_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uploaded File Id"
          },
          "status": {
            "type": "string",
            "enum": [
              "processed",
              "failed",
              "skipped"
            ],
            "title": "Status"
          },
          "sheet_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sheet Name"
          },
          "table_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Table Name"
          },
          "records_processed": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Records Processed"
          },
          "duplicates_skipped": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duplicates Skipped"
          },
          "import_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Import Id"
          },
          "auto_retry_used": {
            "type": "boolean",
            "title": "Auto Retry Used",
            "default": false
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "archive_path",
          "status"
        ],
        "title": "ArchiveAutoProcessFileResult",
        "description": "Per-file outcome when processing an archive."
      },
      "ArchiveAutoProcessResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "total_files": {
            "type": "integer",
            "title": "Total Files"
          },
          "processed_files": {
            "type": "integer",
            "title": "Processed Files"
          },
          "failed_files": {
            "type": "integer",
            "title": "Failed Files"
          },
          "skipped_files": {
            "type": "integer",
            "title": "Skipped Files"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/ArchiveAutoProcessFileResult"
            },
            "type": "array",
            "title": "Results"
          },
          "job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Id"
          }
        },
        "type": "object",
        "required": [
          "success",
          "total_files",
          "processed_files",
          "failed_files",
          "skipped_files",
          "results"
        ],
        "title": "ArchiveAutoProcessResponse",
        "description": "Aggregate result after processing an archive automatically."
      },
      "AsyncTaskStatus": {
        "properties": {
          "task_id": {
            "type": "string",
            "title": "Task Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "progress": {
            "type": "integer",
            "title": "Progress",
            "default": 0
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "result": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MapDataResponse"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "task_id",
          "status",
          "message"
        ],
        "title": "AsyncTaskStatus"
      },
      "AuthResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "token": {
            "$ref": "#/components/schemas/Token"
          },
          "user": {
            "$ref": "#/components/schemas/UserResponse"
          }
        },
        "type": "object",
        "required": [
          "success",
          "token",
          "user"
        ],
        "title": "AuthResponse",
        "description": "Authentication response with token and user info."
      },
      "AutoExecutionResult": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "strategy_executed": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Strategy Executed"
          },
          "strategy_attempted": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Strategy Attempted"
          },
          "table_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Table Name"
          },
          "target_table": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Table"
          },
          "records_processed": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Records Processed"
          },
          "duplicates_skipped": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duplicates Skipped",
            "default": 0
          },
          "duplicate_rows": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/DuplicateRow"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duplicate Rows"
          },
          "duplicate_rows_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duplicate Rows Count"
          },
          "import_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Import Id"
          },
          "mapping_errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/MappingErrorDetail"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mapping Errors"
          },
          "type_mismatch_summary": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/TypeMismatchSummary"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Type Mismatch Summary"
          },
          "llm_followup": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Followup"
          },
          "schema_migration_results": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Schema Migration Results"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "AutoExecutionResult",
        "description": "Structured summary of automatic execution attempts."
      },
      "Body_analyze_file_endpoint_analyze_file_post": {
        "properties": {
          "file": {
            "anyOf": [
              {
                "type": "string",
                "format": "binary"
              },
              {
                "type": "null"
              }
            ],
            "title": "File"
          },
          "file_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "File Id"
          },
          "sample_size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sample Size"
          },
          "analysis_mode": {
            "$ref": "#/components/schemas/AnalysisMode",
            "default": "manual"
          },
          "conflict_resolution": {
            "$ref": "#/components/schemas/ConflictResolutionMode",
            "default": "ask_user"
          },
          "auto_execute_confidence_threshold": {
            "type": "number",
            "title": "Auto Execute Confidence Threshold",
            "default": 0.9
          },
          "max_iterations": {
            "type": "integer",
            "title": "Max Iterations",
            "default": 5
          },
          "target_table_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Table Name"
          },
          "target_table_mode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Table Mode"
          },
          "llm_instruction": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction"
          },
          "llm_instruction_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction Id"
          },
          "save_llm_instruction": {
            "type": "boolean",
            "title": "Save Llm Instruction",
            "default": false
          },
          "llm_instruction_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction Title"
          },
          "require_explicit_multi_value": {
            "type": "boolean",
            "title": "Require Explicit Multi Value",
            "default": false
          },
          "skip_file_duplicate_check": {
            "type": "boolean",
            "title": "Skip File Duplicate Check",
            "default": false
          }
        },
        "type": "object",
        "title": "Body_analyze_file_endpoint_analyze_file_post"
      },
      "Body_auto_process_archive_endpoint_auto_process_archive_post": {
        "properties": {
          "file_id": {
            "type": "string",
            "title": "File Id"
          },
          "analysis_mode": {
            "$ref": "#/components/schemas/AnalysisMode",
            "default": "auto_always"
          },
          "conflict_resolution": {
            "$ref": "#/components/schemas/ConflictResolutionMode",
            "default": "llm_decide"
          },
          "auto_execute_confidence_threshold": {
            "type": "number",
            "title": "Auto Execute Confidence Threshold",
            "default": 0.9
          },
          "max_iterations": {
            "type": "integer",
            "title": "Max Iterations",
            "default": 5
          },
          "target_table_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Table Name"
          },
          "target_table_mode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Table Mode"
          },
          "llm_instruction": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction"
          },
          "llm_instruction_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction Id"
          },
          "save_llm_instruction": {
            "type": "boolean",
            "title": "Save Llm Instruction",
            "default": false
          },
          "llm_instruction_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction Title"
          }
        },
        "type": "object",
        "required": [
          "file_id"
        ],
        "title": "Body_auto_process_archive_endpoint_auto_process_archive_post"
      },
      "Body_auto_process_workbook_endpoint_auto_process_workbook_post": {
        "properties": {
          "file_id": {
            "type": "string",
            "title": "File Id"
          },
          "sheet_names": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sheet Names"
          },
          "analysis_mode": {
            "$ref": "#/components/schemas/AnalysisMode",
            "default": "auto_always"
          },
          "conflict_resolution": {
            "$ref": "#/components/schemas/ConflictResolutionMode",
            "default": "llm_decide"
          },
          "auto_execute_confidence_threshold": {
            "type": "number",
            "title": "Auto Execute Confidence Threshold",
            "default": 0.9
          },
          "max_iterations": {
            "type": "integer",
            "title": "Max Iterations",
            "default": 5
          },
          "target_table_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Table Name"
          },
          "target_table_mode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Table Mode"
          },
          "llm_instruction": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction"
          }
        },
        "type": "object",
        "required": [
          "file_id"
        ],
        "title": "Body_auto_process_workbook_endpoint_auto_process_workbook_post"
      },
      "Body_detect_mapping_endpoint_detect_mapping_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_detect_mapping_endpoint_detect_mapping_post"
      },
      "Body_map_data_endpoint_map_data_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          },
          "mapping_json": {
            "type": "string",
            "title": "Mapping Json"
          }
        },
        "type": "object",
        "required": [
          "file",
          "mapping_json"
        ],
        "title": "Body_map_data_endpoint_map_data_post"
      },
      "Body_overwrite_file_in_storage_endpoint_upload_to_b2_overwrite_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_overwrite_file_in_storage_endpoint_upload_to_b2_overwrite_post"
      },
      "Body_resume_auto_process_archive_endpoint_auto_process_archive_resume_post": {
        "properties": {
          "file_id": {
            "type": "string",
            "title": "File Id"
          },
          "from_job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "From Job Id"
          },
          "resume_failed_entries_only": {
            "type": "boolean",
            "title": "Resume Failed Entries Only",
            "default": true
          },
          "analysis_mode": {
            "$ref": "#/components/schemas/AnalysisMode",
            "default": "auto_always"
          },
          "conflict_resolution": {
            "$ref": "#/components/schemas/ConflictResolutionMode",
            "default": "llm_decide"
          },
          "auto_execute_confidence_threshold": {
            "type": "number",
            "title": "Auto Execute Confidence Threshold",
            "default": 0.9
          },
          "max_iterations": {
            "type": "integer",
            "title": "Max Iterations",
            "default": 5
          },
          "target_table_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Table Name"
          },
          "target_table_mode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Table Mode"
          },
          "llm_instruction": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction"
          },
          "llm_instruction_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction Id"
          },
          "save_llm_instruction": {
            "type": "boolean",
            "title": "Save Llm Instruction",
            "default": false
          },
          "llm_instruction_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Instruction Title"
          }
        },
        "type": "object",
        "required": [
          "file_id"
        ],
        "title": "Body_resume_auto_process_archive_endpoint_auto_process_archive_resume_post"
      },
      "Body_upload_file_to_storage_endpoint_upload_to_b2_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          },
          "allow_duplicate": {
            "type": "boolean",
            "title": "Allow Duplicate",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_file_to_storage_endpoint_upload_to_b2_post"
      },
      "BootstrapStatusResponse": {
        "properties": {
          "requires_admin_setup": {
            "type": "boolean",
            "title": "Requires Admin Setup"
          }
        },
        "type": "object",
        "required": [
          "requires_admin_setup"
        ],
        "title": "BootstrapStatusResponse",
        "description": "Indicates whether an admin account is needed."
      },
      "ChartDataset": {
        "properties": {
          "label": {
            "type": "string",
            "title": "Label"
          },
          "data": {
            "items": {
              "type": "number"
            },
            "type": "array",
            "title": "Data"
          },
          "backgroundColor": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Backgroundcolor"
          },
          "borderColor": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bordercolor"
          },
          "fill": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fill"
          }
        },
        "type": "object",
        "required": [
          "label",
          "data"
        ],
        "title": "ChartDataset",
        "description": "Dataset configuration for Chart.js."
      },
      "ChartSpec": {
        "properties": {
          "type": {
            "type": "string",
            "title": "Type"
          },
          "labels": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Labels"
          },
          "datasets": {
            "items": {
              "$ref": "#/components/schemas/ChartDataset"
            },
            "type": "array",
            "title": "Datasets"
          },
          "options": {
            "additionalProperties": true,
            "type": "object",
            "title": "Options"
          }
        },
        "type": "object",
        "required": [
          "type",
          "labels",
          "datasets"
        ],
        "title": "ChartSpec",
        "description": "Chart.js-ready spec with minimal options to keep responses concise."
      },
      "ChartSuggestion": {
        "properties": {
          "should_display": {
            "type": "boolean",
            "title": "Should Display"
          },
          "reason": {
            "type": "string",
            "title": "Reason"
          },
          "spec": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ChartSpec"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "should_display",
          "reason"
        ],
        "title": "ChartSuggestion",
        "description": "Indicates whether a chart should be rendered and why."
      },
      "CheckDuplicateRequest": {
        "properties": {
          "file_name": {
            "type": "string",
            "title": "File Name"
          },
          "file_hash": {
            "type": "string",
            "title": "File Hash"
          },
          "file_size": {
            "type": "integer",
            "title": "File Size"
          }
        },
        "type": "object",
        "required": [
          "file_name",
          "file_hash",
          "file_size"
        ],
        "title": "CheckDuplicateRequest",
        "description": "Request to check if file is duplicate"
      },
      "CheckDuplicateResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "is_duplicate": {
            "type": "boolean",
            "title": "Is Duplicate"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "existing_file": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/UploadedFileInfo"
              },
              {
                "type": "null"
              }
            ]
          },
          "can_upload": {
            "type": "boolean",
            "title": "Can Upload",
            "default": false
          },
          "upload_authorization": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Upload Authorization"
          }
        },
        "type": "object",
        "required": [
          "success",
          "is_duplicate",
          "message"
        ],
        "title": "CheckDuplicateResponse",
        "description": "Response from duplicate check"
      },
      "ColumnInfo": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "type": {
            "type": "string",
            "title": "Type"
          },
          "nullable": {
            "type": "boolean",
            "title": "Nullable"
          }
        },
        "type": "object",
        "required": [
          "name",
          "type",
          "nullable"
        ],
        "title": "ColumnInfo"
      },
      "CompleteMultipartUploadRequest": {
        "properties": {
          "file_name": {
            "type": "string",
            "title": "File Name"
          },
          "file_hash": {
            "type": "string",
            "title": "File Hash"
          },
          "file_size": {
            "type": "integer",
            "title": "File Size"
          },
          "content_type": {
            "type": "string",
            "title": "Content Type"
          },
          "upload_id": {
            "type": "string",
            "title": "Upload Id"
          },
          "file_path": {
            "type": "string",
            "title": "File Path"
          },
          "parts": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Parts"
          }
        },
        "type": "object",
        "required": [
          "file_name",
          "file_hash",
          "file_size",
          "content_type",
          "upload_id",
          "file_path",
          "parts"
        ],
        "title": "CompleteMultipartUploadRequest",
        "description": "Request to complete a multipart upload"
      },
      "CompleteMultipartUploadResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "file": {
            "$ref": "#/components/schemas/UploadedFileInfo"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "file"
        ],
        "title": "CompleteMultipartUploadResponse",
        "description": "Response from completing multipart upload"
      },
      "CompleteUploadRequest": {
        "properties": {
          "file_name": {
            "type": "string",
            "title": "File Name"
          },
          "file_hash": {
            "type": "string",
            "title": "File Hash"
          },
          "file_size": {
            "type": "integer",
            "title": "File Size"
          },
          "content_type": {
            "type": "string",
            "title": "Content Type"
          },
          "b2_file_id": {
            "type": "string",
            "title": "B2 File Id"
          },
          "b2_file_path": {
            "type": "string",
            "title": "B2 File Path"
          }
        },
        "type": "object",
        "required": [
          "file_name",
          "file_hash",
          "file_size",
          "content_type",
          "b2_file_id",
          "b2_file_path"
        ],
        "title": "CompleteUploadRequest",
        "description": "Request to complete upload after direct B2 upload"
      },
      "CompleteUploadResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "file": {
            "$ref": "#/components/schemas/UploadedFileInfo"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "file"
        ],
        "title": "CompleteUploadResponse",
        "description": "Response from upload completion"
      },
      "ConflictResolutionMode": {
        "type": "string",
        "enum": [
          "ask_user",
          "llm_decide",
          "prefer_flexible"
        ],
        "title": "ConflictResolutionMode",
        "description": "How to handle schema conflicts"
      },
      "CreateApiKeyRequest": {
        "properties": {
          "app_name": {
            "type": "string",
            "title": "App Name",
            "description": "Name of the application"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Optional description of the API key usage"
          },
          "expires_in_days": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 3650.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Expires In Days",
            "description": "Optional expiration in days"
          },
          "rate_limit_per_minute": {
            "type": "integer",
            "maximum": 1000.0,
            "minimum": 1.0,
            "title": "Rate Limit Per Minute",
            "description": "Rate limit per minute",
            "default": 60
          },
          "allowed_endpoints": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Allowed Endpoints",
            "description": "Optional list of allowed endpoint patterns"
          }
        },
        "type": "object",
        "required": [
          "app_name"
        ],
        "title": "CreateApiKeyRequest",
        "description": "Request schema for creating a new API key."
      },
      "CreateApiKeyResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "api_key": {
            "type": "string",
            "title": "Api Key",
            "description": "The generated API key (only shown once)"
          },
          "key_id": {
            "type": "string",
            "title": "Key Id",
            "description": "The API key ID for management"
          },
          "app_name": {
            "type": "string",
            "title": "App Name"
          },
          "expires_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expires At"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "api_key",
          "key_id",
          "app_name"
        ],
        "title": "CreateApiKeyResponse",
        "description": "Response schema for API key creation.",
        "example": {
          "api_key": "atlas_live_sk_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6",
          "app_name": "Mobile App",
          "expires_at": "2025-12-31T23:59:59",
          "key_id": "550e8400-e29b-41d4-a716-446655440000",
          "message": "API key created successfully",
          "success": true
        }
      },
      "CreateLlmInstructionRequest": {
        "properties": {
          "title": {
            "type": "string",
            "title": "Title"
          },
          "content": {
            "type": "string",
            "title": "Content"
          }
        },
        "type": "object",
        "required": [
          "title",
          "content"
        ],
        "title": "CreateLlmInstructionRequest"
      },
      "CreateWorkflowRequest": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "steps": {
            "items": {
              "$ref": "#/components/schemas/WorkflowStep"
            },
            "type": "array",
            "title": "Steps"
          },
          "variables": {
            "items": {
              "$ref": "#/components/schemas/WorkflowVariable"
            },
            "type": "array",
            "title": "Variables"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By"
          }
        },
        "type": "object",
        "required": [
          "name",
          "steps",
          "variables"
        ],
        "title": "CreateWorkflowRequest",
        "description": "Request to create a new workflow"
      },
      "DeleteFileResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "data_deleted": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data Deleted"
          },
          "rows_removed": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rows Removed"
          },
          "table_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Table Name"
          },
          "import_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Import Ids"
          },
          "warnings": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warnings"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "DeleteFileResponse",
        "description": "Response from file deletion"
      },
      "DetectB2MappingRequest": {
        "properties": {
          "file_name": {
            "type": "string",
            "title": "File Name"
          }
        },
        "type": "object",
        "required": [
          "file_name"
        ],
        "title": "DetectB2MappingRequest"
      },
      "DetectB2MappingResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "file_type": {
            "type": "string",
            "title": "File Type"
          },
          "detected_mapping": {
            "$ref": "#/components/schemas/MappingConfig"
          },
          "columns_found": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Columns Found"
          },
          "rows_sampled": {
            "type": "integer",
            "title": "Rows Sampled"
          }
        },
        "type": "object",
        "required": [
          "success",
          "file_type",
          "detected_mapping",
          "columns_found",
          "rows_sampled"
        ],
        "title": "DetectB2MappingResponse"
      },
      "DuplicateCheckConfig": {
        "properties": {
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "default": true
          },
          "check_file_level": {
            "type": "boolean",
            "title": "Check File Level",
            "default": true
          },
          "allow_file_level_retry": {
            "type": "boolean",
            "title": "Allow File Level Retry",
            "default": false
          },
          "allow_duplicates": {
            "type": "boolean",
            "title": "Allow Duplicates",
            "default": false
          },
          "force_import": {
            "type": "boolean",
            "title": "Force Import",
            "default": false
          },
          "dedupe_within_file": {
            "type": "boolean",
            "title": "Dedupe Within File",
            "default": false
          },
          "uniqueness_columns": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uniqueness Columns"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          }
        },
        "type": "object",
        "title": "DuplicateCheckConfig",
        "description": "Configuration for duplicate checking behavior"
      },
      "DuplicateDetailResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "duplicate": {
            "$ref": "#/components/schemas/DuplicateRow"
          },
          "existing_row": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DuplicateExistingRow"
              },
              {
                "type": "null"
              }
            ]
          },
          "table_name": {
            "type": "string",
            "title": "Table Name"
          },
          "uniqueness_columns": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Uniqueness Columns"
          }
        },
        "type": "object",
        "required": [
          "success",
          "duplicate",
          "table_name",
          "uniqueness_columns"
        ],
        "title": "DuplicateDetailResponse"
      },
      "DuplicateExistingRow": {
        "properties": {
          "row_id": {
            "type": "integer",
            "title": "Row Id"
          },
          "record": {
            "additionalProperties": true,
            "type": "object",
            "title": "Record"
          }
        },
        "type": "object",
        "required": [
          "row_id",
          "record"
        ],
        "title": "DuplicateExistingRow"
      },
      "DuplicateMergeRequest": {
        "properties": {
          "updates": {
            "additionalProperties": true,
            "type": "object",
            "title": "Updates"
          },
          "resolved_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved By"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          }
        },
        "type": "object",
        "title": "DuplicateMergeRequest"
      },
      "DuplicateMergeResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "duplicate": {
            "$ref": "#/components/schemas/DuplicateRow"
          },
          "updated_columns": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Updated Columns"
          },
          "existing_row": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DuplicateExistingRow"
              },
              {
                "type": "null"
              }
            ]
          },
          "resolution_details": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolution Details"
          }
        },
        "type": "object",
        "required": [
          "success",
          "duplicate",
          "updated_columns"
        ],
        "title": "DuplicateMergeResponse"
      },
      "DuplicateRow": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "record_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Record Number"
          },
          "record": {
            "additionalProperties": true,
            "type": "object",
            "title": "Record"
          },
          "existing_row": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DuplicateExistingRow"
              },
              {
                "type": "null"
              }
            ]
          },
          "detected_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detected At"
          },
          "resolved_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved At"
          },
          "resolved_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved By"
          },
          "resolution_details": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolution Details"
          }
        },
        "type": "object",
        "required": [
          "id",
          "record"
        ],
        "title": "DuplicateRow",
        "description": "Represents a row that was skipped because it was a duplicate."
      },
      "ExecuteInteractiveImportRequest": {
        "properties": {
          "file_id": {
            "type": "string",
            "title": "File Id"
          },
          "thread_id": {
            "type": "string",
            "title": "Thread Id"
          }
        },
        "type": "object",
        "required": [
          "file_id",
          "thread_id"
        ],
        "title": "ExecuteInteractiveImportRequest",
        "description": "Request to execute import from interactive session"
      },
      "ExecuteRecommendedImportRequest": {
        "properties": {
          "analysis_id": {
            "type": "string",
            "title": "Analysis Id"
          },
          "confirmed_mapping": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MappingConfig"
              },
              {
                "type": "null"
              }
            ]
          },
          "force_execute": {
            "type": "boolean",
            "title": "Force Execute",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "analysis_id"
        ],
        "title": "ExecuteRecommendedImportRequest",
        "description": "Request to execute a recommended import"
      },
      "ExecuteWorkflowRequest": {
        "properties": {
          "variables": {
            "additionalProperties": true,
            "type": "object",
            "title": "Variables"
          },
          "executed_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Executed By"
          },
          "include_context": {
            "type": "boolean",
            "title": "Include Context",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "variables"
        ],
        "title": "ExecuteWorkflowRequest",
        "description": "Request to execute a workflow"
      },
      "ExportQueryRequest": {
        "properties": {
          "sql_query": {
            "type": "string",
            "title": "Sql Query",
            "description": "SQL SELECT query to execute"
          },
          "filename": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filename",
            "description": "Optional filename for the download (defaults to 'export.csv')"
          }
        },
        "type": "object",
        "required": [
          "sql_query"
        ],
        "title": "ExportQueryRequest",
        "description": "Request model for export query endpoint."
      },
      "GenerateSQLRequest": {
        "properties": {
          "prompt": {
            "type": "string",
            "title": "Prompt",
            "description": "Natural language description of the desired query"
          },
          "table_hints": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Table Hints",
            "description": "Optional list of table names to focus schema context on"
          }
        },
        "type": "object",
        "required": [
          "prompt"
        ],
        "title": "GenerateSQLRequest",
        "description": "Request to generate SQL from natural language prompt"
      },
      "GenerateSQLResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "sql_query": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sql Query",
            "description": "Generated SQL query"
          },
          "tables_referenced": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tables Referenced",
            "description": "List of tables used in the query"
          },
          "explanation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Explanation",
            "description": "Brief explanation of what the query does"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if generation failed"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "GenerateSQLResponse",
        "description": "Response from SQL generation"
      },
      "GenerateWorkflowRequest": {
        "properties": {
          "description": {
            "type": "string",
            "title": "Description"
          }
        },
        "type": "object",
        "required": [
          "description"
        ],
        "title": "GenerateWorkflowRequest",
        "description": "Request to generate a workflow from natural language"
      },
      "GenerateWorkflowResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "workflow": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workflow"
          },
          "llm_response": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Response"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "GenerateWorkflowResponse",
        "description": "Response from workflow generation"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "ImportDuplicateRowsResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "duplicates": {
            "items": {
              "$ref": "#/components/schemas/DuplicateRow"
            },
            "type": "array",
            "title": "Duplicates"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "success",
          "duplicates",
          "total_count",
          "limit",
          "offset"
        ],
        "title": "ImportDuplicateRowsResponse",
        "description": "Response containing duplicate rows for an import."
      },
      "ImportHistoryDetailResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "import_record": {
            "$ref": "#/components/schemas/ImportHistoryRecord"
          }
        },
        "type": "object",
        "required": [
          "success",
          "import_record"
        ],
        "title": "ImportHistoryDetailResponse",
        "description": "Response for single import detail"
      },
      "ImportHistoryListResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "imports": {
            "items": {
              "$ref": "#/components/schemas/ImportHistoryRecord"
            },
            "type": "array",
            "title": "Imports"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "success",
          "imports",
          "total_count",
          "limit",
          "offset"
        ],
        "title": "ImportHistoryListResponse",
        "description": "Response for import history list"
      },
      "ImportHistoryRecord": {
        "properties": {
          "import_id": {
            "type": "string",
            "title": "Import Id"
          },
          "import_timestamp": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Import Timestamp"
          },
          "file_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "File Name"
          },
          "file_hash": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "File Hash"
          },
          "table_name": {
            "type": "string",
            "title": "Table Name"
          },
          "source_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Type"
          },
          "source_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Path"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "rows_inserted": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rows Inserted"
          },
          "duplicates_found": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duplicates Found"
          },
          "duration_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Seconds"
          },
          "parsing_time_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parsing Time Seconds"
          },
          "insert_time_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Insert Time Seconds"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          }
        },
        "type": "object",
        "required": [
          "import_id",
          "table_name",
          "status"
        ],
        "title": "ImportHistoryRecord",
        "description": "Single import history record"
      },
      "ImportJobInfo": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "file_id": {
            "type": "string",
            "title": "File Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "stage": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stage"
          },
          "progress": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress"
          },
          "retry_attempt": {
            "type": "integer",
            "title": "Retry Attempt",
            "default": 1
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          },
          "trigger_source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trigger Source"
          },
          "analysis_mode": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AnalysisMode"
              },
              {
                "type": "null"
              }
            ]
          },
          "conflict_mode": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ConflictResolutionMode"
              },
              {
                "type": "null"
              }
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At"
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata"
          },
          "result_metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Result Metadata"
          }
        },
        "type": "object",
        "required": [
          "id",
          "file_id",
          "status"
        ],
        "title": "ImportJobInfo",
        "description": "Metadata about a long-running import job."
      },
      "ImportJobListResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "jobs": {
            "items": {
              "$ref": "#/components/schemas/ImportJobInfo"
            },
            "type": "array",
            "title": "Jobs"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "success",
          "jobs",
          "total_count",
          "limit",
          "offset"
        ],
        "title": "ImportJobListResponse",
        "description": "Response wrapper for a list of import jobs."
      },
      "ImportJobResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "job": {
            "$ref": "#/components/schemas/ImportJobInfo"
          }
        },
        "type": "object",
        "required": [
          "success",
          "job"
        ],
        "title": "ImportJobResponse",
        "description": "Response wrapper for a single import job."
      },
      "ImportStatisticsResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "total_imports": {
            "type": "integer",
            "title": "Total Imports"
          },
          "successful_imports": {
            "type": "integer",
            "title": "Successful Imports"
          },
          "failed_imports": {
            "type": "integer",
            "title": "Failed Imports"
          },
          "total_rows_inserted": {
            "type": "integer",
            "title": "Total Rows Inserted"
          },
          "total_duplicates_found": {
            "type": "integer",
            "title": "Total Duplicates Found"
          },
          "avg_duration_seconds": {
            "type": "number",
            "title": "Avg Duration Seconds"
          }
        },
        "type": "object",
        "required": [
          "success",
          "total_imports",
          "successful_imports",
          "failed_imports",
          "total_rows_inserted",
          "total_duplicates_found",
          "avg_duration_seconds"
        ],
        "title": "ImportStatisticsResponse",
        "description": "Response for import statistics"
      },
      "ListApiKeysResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "api_keys": {
            "items": {
              "$ref": "#/components/schemas/ApiKeyInfo"
            },
            "type": "array",
            "title": "Api Keys"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "success",
          "api_keys",
          "total_count",
          "limit",
          "offset"
        ],
        "title": "ListApiKeysResponse",
        "description": "Response schema for listing API keys."
      },
      "LlmInstructionListResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "instructions": {
            "items": {
              "$ref": "#/components/schemas/LlmInstructionProfile"
            },
            "type": "array",
            "title": "Instructions"
          }
        },
        "type": "object",
        "required": [
          "success",
          "instructions"
        ],
        "title": "LlmInstructionListResponse",
        "description": "Response for listing saved LLM instructions."
      },
      "LlmInstructionProfile": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "content": {
            "type": "string",
            "title": "Content"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "last_used_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "title",
          "content"
        ],
        "title": "LlmInstructionProfile",
        "description": "Reusable LLM instruction profile."
      },
      "MapB2DataAsyncRequest": {
        "properties": {
          "file_name": {
            "type": "string",
            "title": "File Name"
          },
          "mapping": {
            "$ref": "#/components/schemas/MappingConfig"
          }
        },
        "type": "object",
        "required": [
          "file_name",
          "mapping"
        ],
        "title": "MapB2DataAsyncRequest"
      },
      "MapB2DataRequest": {
        "properties": {
          "file_name": {
            "type": "string",
            "title": "File Name"
          },
          "mapping": {
            "$ref": "#/components/schemas/MappingConfig"
          }
        },
        "type": "object",
        "required": [
          "file_name",
          "mapping"
        ],
        "title": "MapB2DataRequest"
      },
      "MapDataResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "records_processed": {
            "type": "integer",
            "title": "Records Processed"
          },
          "duplicates_skipped": {
            "type": "integer",
            "title": "Duplicates Skipped",
            "default": 0
          },
          "intra_file_duplicates_skipped": {
            "type": "integer",
            "title": "Intra File Duplicates Skipped",
            "default": 0
          },
          "table_name": {
            "type": "string",
            "title": "Table Name"
          },
          "import_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Import Id"
          },
          "duplicate_rows": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/DuplicateRow"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duplicate Rows"
          },
          "duplicate_rows_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duplicate Rows Count"
          },
          "llm_followup": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Followup"
          },
          "needs_user_input": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Needs User Input"
          },
          "can_execute": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Can Execute"
          },
          "llm_decision": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Llm Decision"
          },
          "thread_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thread Id"
          },
          "mapping_errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/MappingErrorDetail"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mapping Errors"
          },
          "type_mismatch_summary": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/TypeMismatchSummary"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Type Mismatch Summary"
          },
          "job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Id"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "records_processed",
          "table_name"
        ],
        "title": "MapDataResponse"
      },
      "MappingConfig": {
        "properties": {
          "table_name": {
            "type": "string",
            "title": "Table Name"
          },
          "db_schema": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Db Schema"
          },
          "mappings": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Mappings"
          },
          "rules": {
            "additionalProperties": true,
            "type": "object",
            "title": "Rules",
            "default": {}
          },
          "unique_columns": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unique Columns"
          },
          "check_duplicates": {
            "type": "boolean",
            "title": "Check Duplicates",
            "default": true
          },
          "duplicate_check": {
            "$ref": "#/components/schemas/DuplicateCheckConfig",
            "default": {
              "enabled": true,
              "check_file_level": true,
              "allow_file_level_retry": false,
              "allow_duplicates": false,
              "force_import": false,
              "dedupe_within_file": false
            }
          }
        },
        "type": "object",
        "required": [
          "table_name",
          "db_schema",
          "mappings"
        ],
        "title": "MappingConfig"
      },
      "MappingErrorDetail": {
        "properties": {
          "type": {
            "type": "string",
            "title": "Type"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "column": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Column"
          },
          "expected_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expected Type"
          },
          "value": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Value"
          },
          "source_field": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Field"
          },
          "target_field": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Field"
          }
        },
        "type": "object",
        "required": [
          "type",
          "message"
        ],
        "title": "MappingErrorDetail",
        "description": "Structured information about mapping errors surfaced during import."
      },
      "QueryConversation": {
        "properties": {
          "thread_id": {
            "type": "string",
            "title": "Thread Id"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/QueryConversationMessage"
            },
            "type": "array",
            "title": "Messages"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "thread_id",
          "messages"
        ],
        "title": "QueryConversation"
      },
      "QueryConversationListResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "conversations": {
            "items": {
              "$ref": "#/components/schemas/QueryConversationSummary"
            },
            "type": "array",
            "title": "Conversations"
          }
        },
        "type": "object",
        "required": [
          "success",
          "conversations"
        ],
        "title": "QueryConversationListResponse"
      },
      "QueryConversationMessage": {
        "properties": {
          "role": {
            "type": "string",
            "title": "Role"
          },
          "content": {
            "type": "string",
            "title": "Content"
          },
          "timestamp": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Timestamp"
          },
          "executed_sql": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Executed Sql"
          },
          "data_csv": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data Csv"
          },
          "execution_time_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Execution Time Seconds"
          },
          "rows_returned": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rows Returned"
          },
          "chart_suggestion": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ChartSuggestion"
              },
              {
                "type": "null"
              }
            ]
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "role",
          "content"
        ],
        "title": "QueryConversationMessage"
      },
      "QueryConversationResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "conversation": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/QueryConversation"
              },
              {
                "type": "null"
              }
            ]
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "QueryConversationResponse"
      },
      "QueryConversationSummary": {
        "properties": {
          "thread_id": {
            "type": "string",
            "title": "Thread Id"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "first_user_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "First User Prompt"
          }
        },
        "type": "object",
        "required": [
          "thread_id"
        ],
        "title": "QueryConversationSummary"
      },
      "QueryDatabaseRequest": {
        "properties": {
          "prompt": {
            "type": "string",
            "title": "Prompt"
          },
          "max_rows": {
            "type": "integer",
            "maximum": 10000.0,
            "minimum": 1.0,
            "title": "Max Rows",
            "default": 100
          },
          "thread_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thread Id"
          }
        },
        "type": "object",
        "required": [
          "prompt"
        ],
        "title": "QueryDatabaseRequest"
      },
      "QueryDatabaseResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "response": {
            "type": "string",
            "title": "Response"
          },
          "thread_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thread Id"
          },
          "executed_sql": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Executed Sql"
          },
          "data_csv": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data Csv"
          },
          "execution_time_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Execution Time Seconds"
          },
          "rows_returned": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rows Returned"
          },
          "chart_suggestion": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ChartSuggestion"
              },
              {
                "type": "null"
              }
            ]
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "success",
          "response"
        ],
        "title": "QueryDatabaseResponse"
      },
      "RevokeApiKeyResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "key_id": {
            "type": "string",
            "title": "Key Id"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "key_id"
        ],
        "title": "RevokeApiKeyResponse",
        "description": "Response schema for revoking an API key."
      },
      "SchemaConflict": {
        "properties": {
          "conflict_type": {
            "type": "string",
            "title": "Conflict Type"
          },
          "description": {
            "type": "string",
            "title": "Description"
          },
          "options": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Options"
          },
          "recommended_option": {
            "type": "string",
            "title": "Recommended Option"
          },
          "reasoning": {
            "type": "string",
            "title": "Reasoning"
          }
        },
        "type": "object",
        "required": [
          "conflict_type",
          "description",
          "options",
          "recommended_option",
          "reasoning"
        ],
        "title": "SchemaConflict",
        "description": "Represents a conflict that needs resolution"
      },
      "StartMultipartUploadRequest": {
        "properties": {
          "file_name": {
            "type": "string",
            "title": "File Name"
          },
          "file_size": {
            "type": "integer",
            "title": "File Size"
          },
          "file_hash": {
            "type": "string",
            "title": "File Hash"
          },
          "content_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Type"
          }
        },
        "type": "object",
        "required": [
          "file_name",
          "file_size",
          "file_hash"
        ],
        "title": "StartMultipartUploadRequest",
        "description": "Request to start a multipart upload"
      },
      "StartMultipartUploadResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "upload_id": {
            "type": "string",
            "title": "Upload Id"
          },
          "file_path": {
            "type": "string",
            "title": "File Path"
          },
          "part_size": {
            "type": "integer",
            "title": "Part Size"
          },
          "total_parts": {
            "type": "integer",
            "title": "Total Parts"
          },
          "part_urls": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Part Urls"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "success",
          "upload_id",
          "file_path",
          "part_size",
          "total_parts",
          "part_urls",
          "message"
        ],
        "title": "StartMultipartUploadResponse",
        "description": "Response from starting multipart upload"
      },
      "TableDataResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "table_name": {
            "type": "string",
            "title": "Table Name"
          },
          "data": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Data"
          },
          "total_rows": {
            "type": "integer",
            "title": "Total Rows"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "success",
          "table_name",
          "data",
          "total_rows",
          "limit",
          "offset"
        ],
        "title": "TableDataResponse"
      },
      "TableInfo": {
        "properties": {
          "table_name": {
            "type": "string",
            "title": "Table Name"
          },
          "row_count": {
            "type": "integer",
            "title": "Row Count"
          }
        },
        "type": "object",
        "required": [
          "table_name",
          "row_count"
        ],
        "title": "TableInfo"
      },
      "TableSchemaResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "table_name": {
            "type": "string",
            "title": "Table Name"
          },
          "columns": {
            "items": {
              "$ref": "#/components/schemas/ColumnInfo"
            },
            "type": "array",
            "title": "Columns"
          }
        },
        "type": "object",
        "required": [
          "success",
          "table_name",
          "columns"
        ],
        "title": "TableSchemaResponse"
      },
      "TableStatsResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "table_name": {
            "type": "string",
            "title": "Table Name"
          },
          "total_rows": {
            "type": "integer",
            "title": "Total Rows"
          },
          "columns_count": {
            "type": "integer",
            "title": "Columns Count"
          },
          "data_types": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Data Types"
          }
        },
        "type": "object",
        "required": [
          "success",
          "table_name",
          "total_rows",
          "columns_count",
          "data_types"
        ],
        "title": "TableStatsResponse"
      },
      "TablesListResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "tables": {
            "items": {
              "$ref": "#/components/schemas/TableInfo"
            },
            "type": "array",
            "title": "Tables"
          }
        },
        "type": "object",
        "required": [
          "success",
          "tables"
        ],
        "title": "TablesListResponse"
      },
      "Token": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "default": "bearer"
          }
        },
        "type": "object",
        "required": [
          "access_token"
        ],
        "title": "Token",
        "description": "JWT token response."
      },
      "TypeMismatchSummary": {
        "properties": {
          "column": {
            "type": "string",
            "title": "Column"
          },
          "expected_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expected Type"
          },
          "occurrences": {
            "type": "integer",
            "title": "Occurrences",
            "default": 0
          },
          "samples": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Samples"
          }
        },
        "type": "object",
        "required": [
          "column"
        ],
        "title": "TypeMismatchSummary",
        "description": "Aggregated summary of type mismatch errors for remediation planning."
      },
      "UpdateApiKeyRequest": {
        "properties": {
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "rate_limit_per_minute": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 1000.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Limit Per Minute"
          },
          "allowed_endpoints": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Allowed Endpoints"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active"
          }
        },
        "type": "object",
        "title": "UpdateApiKeyRequest",
        "description": "Request schema for updating an API key."
      },
      "UpdateApiKeyResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "api_key": {
            "$ref": "#/components/schemas/ApiKeyInfo"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "api_key"
        ],
        "title": "UpdateApiKeyResponse",
        "description": "Response schema for updating an API key."
      },
      "UpdateLlmInstructionRequest": {
        "properties": {
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content"
          }
        },
        "type": "object",
        "title": "UpdateLlmInstructionRequest"
      },
      "UpdateWorkflowRequest": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active"
          }
        },
        "type": "object",
        "title": "UpdateWorkflowRequest",
        "description": "Request to update workflow metadata"
      },
      "UploadFileResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "files": {
            "items": {
              "$ref": "#/components/schemas/UploadedFileInfo"
            },
            "type": "array",
            "title": "Files"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "files"
        ],
        "title": "UploadFileResponse",
        "description": "Response from file upload"
      },
      "UploadedFileDetailResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "file": {
            "$ref": "#/components/schemas/UploadedFileInfo"
          }
        },
        "type": "object",
        "required": [
          "success",
          "file"
        ],
        "title": "UploadedFileDetailResponse",
        "description": "Response for single uploaded file detail"
      },
      "UploadedFileInfo": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "file_name": {
            "type": "string",
            "title": "File Name"
          },
          "b2_file_id": {
            "type": "string",
            "title": "B2 File Id"
          },
          "b2_file_path": {
            "type": "string",
            "title": "B2 File Path"
          },
          "file_size": {
            "type": "integer",
            "title": "File Size"
          },
          "content_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Type"
          },
          "upload_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Upload Date"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "mapped_table_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mapped Table Name"
          },
          "mapped_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mapped Date"
          },
          "mapped_rows": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mapped Rows"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          },
          "active_job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active Job Id"
          },
          "active_job_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active Job Status"
          },
          "active_job_stage": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active Job Stage"
          },
          "active_job_progress": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active Job Progress"
          },
          "active_job_started_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Active Job Started At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "file_name",
          "b2_file_id",
          "b2_file_path",
          "file_size",
          "status"
        ],
        "title": "UploadedFileInfo",
        "description": "Information about an uploaded file"
      },
      "UploadedFilesListResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "files": {
            "items": {
              "$ref": "#/components/schemas/UploadedFileInfo"
            },
            "type": "array",
            "title": "Files"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "success",
          "files",
          "total_count",
          "limit",
          "offset"
        ],
        "title": "UploadedFilesListResponse",
        "description": "Response for uploaded files list"
      },
      "UserLogin": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password": {
            "type": "string",
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "UserLogin",
        "description": "Login request schema."
      },
      "UserRegister": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password": {
            "type": "string",
            "title": "Password"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "UserRegister",
        "description": "User registration schema."
      },
      "UserResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "email": {
            "type": "string",
            "title": "Email"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "role": {
            "type": "string",
            "title": "Role"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "created_at",
          "is_active",
          "role"
        ],
        "title": "UserResponse",
        "description": "User information response."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "WorkbookSheetsResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "sheets": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Sheets"
          }
        },
        "type": "object",
        "required": [
          "success",
          "sheets"
        ],
        "title": "WorkbookSheetsResponse",
        "description": "List of sheet names available in an uploaded Excel workbook."
      },
      "WorkflowCreateResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "workflow_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workflow Id"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "WorkflowCreateResponse",
        "description": "Response from workflow creation"
      },
      "WorkflowDetail": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "steps": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Steps"
          },
          "variables": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Variables"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "is_active",
          "steps",
          "variables"
        ],
        "title": "WorkflowDetail",
        "description": "Detailed workflow information"
      },
      "WorkflowExecutionDetailResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "execution": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Execution"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "WorkflowExecutionDetailResponse",
        "description": "Response for single execution detail"
      },
      "WorkflowExecutionListResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "executions": {
            "items": {
              "$ref": "#/components/schemas/WorkflowExecutionSummary"
            },
            "type": "array",
            "title": "Executions"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          }
        },
        "type": "object",
        "required": [
          "success",
          "executions",
          "total_count"
        ],
        "title": "WorkflowExecutionListResponse",
        "description": "Response for execution list"
      },
      "WorkflowExecutionResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "execution_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Execution Id"
          },
          "workflow_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workflow Id"
          },
          "workflow_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workflow Name"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "variables_used": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Variables Used"
          },
          "step_results": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/WorkflowStepResult"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Step Results"
          },
          "total_execution_time_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Execution Time Seconds"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "WorkflowExecutionResponse",
        "description": "Response from workflow execution"
      },
      "WorkflowExecutionSummary": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "workflow_id": {
            "type": "string",
            "title": "Workflow Id"
          },
          "workflow_name": {
            "type": "string",
            "title": "Workflow Name"
          },
          "executed_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Executed By"
          },
          "executed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Executed At"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "variables_used": {
            "additionalProperties": true,
            "type": "object",
            "title": "Variables Used"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At"
          },
          "step_count": {
            "type": "integer",
            "title": "Step Count"
          }
        },
        "type": "object",
        "required": [
          "id",
          "workflow_id",
          "workflow_name",
          "status",
          "variables_used",
          "step_count"
        ],
        "title": "WorkflowExecutionSummary",
        "description": "Summary of a workflow execution"
      },
      "WorkflowListResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "workflows": {
            "items": {
              "$ref": "#/components/schemas/WorkflowSummary"
            },
            "type": "array",
            "title": "Workflows"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          }
        },
        "type": "object",
        "required": [
          "success",
          "workflows",
          "total_count"
        ],
        "title": "WorkflowListResponse",
        "description": "Response for workflow list"
      },
      "WorkflowResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "workflow": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/WorkflowDetail"
              },
              {
                "type": "null"
              }
            ]
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "WorkflowResponse",
        "description": "Response for single workflow"
      },
      "WorkflowStep": {
        "properties": {
          "step_order": {
            "type": "integer",
            "title": "Step Order"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "prompt_template": {
            "type": "string",
            "title": "Prompt Template"
          }
        },
        "type": "object",
        "required": [
          "step_order",
          "prompt_template"
        ],
        "title": "WorkflowStep",
        "description": "Step definition for a workflow"
      },
      "WorkflowStepResult": {
        "properties": {
          "step_order": {
            "type": "integer",
            "title": "Step Order"
          },
          "step_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Step Name"
          },
          "executed_sql": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Executed Sql"
          },
          "result_csv": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Result Csv"
          },
          "rows_returned": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rows Returned"
          },
          "execution_time_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Execution Time Seconds"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          },
          "response": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Response"
          }
        },
        "type": "object",
        "required": [
          "step_order",
          "status"
        ],
        "title": "WorkflowStepResult",
        "description": "Result from executing a workflow step"
      },
      "WorkflowSummary": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "step_count": {
            "type": "integer",
            "title": "Step Count"
          },
          "variable_count": {
            "type": "integer",
            "title": "Variable Count"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "is_active",
          "step_count",
          "variable_count"
        ],
        "title": "WorkflowSummary",
        "description": "Summary of a workflow"
      },
      "WorkflowVariable": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name"
          },
          "variable_type": {
            "type": "string",
            "title": "Variable Type",
            "default": "text"
          },
          "default_value": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Default Value"
          },
          "options": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Options"
          },
          "required": {
            "type": "boolean",
            "title": "Required",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "WorkflowVariable",
        "description": "Variable definition for a workflow"
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      },
      "APIKeyHeader": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-Key"
      }
    }
  }
}